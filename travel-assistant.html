<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—…è¡Œç¾å­¦åŠ©æ‰‹ - åˆ›ä½œä½ çš„æ—…è¡Œæ•…äº‹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background-color: #f8f8f8;
            color: #000;
            line-height: 1.6;
            padding-bottom: 120px;
        }

        .navbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 20px;
            background: #fff;
            border-bottom: 1px solid #eee;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .navbar-back, .navbar-help {
            font-size: 18px;
            color: #07C160;
            padding: 8px 16px;
            background: none;
            border: none;
            cursor: pointer;
        }

        .navbar-title {
            font-size: 18px;
            font-weight: 600;
            color: #000;
        }

        .section {
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            margin: 15px;
            box-shadow: 0 1px 6px rgba(0,0,0,0.04);
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #000;
        }

        /* 9å®«æ ¼æ ·å¼ */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        .grid-item {
            width: 100%;
            height: 0;
            padding-bottom: 100%;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .grid-item.add-btn {
            border: 2px dashed #ddd;
            background: #fafafa;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .grid-item.add-btn:hover {
            background: #f0f0f0;
        }

        .grid-item.dragging {
            opacity: 0.6;
            transform: scale(1.05);
            z-index: 10;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .grid-item.drop-zone {
            background: #e8f5e8;
            border: 2px dashed #07C160;
        }

        .add-icon {
            font-size: 24px;
            color: #999;
        }

        .grid-item img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .grid-item .remove-btn {
            position: absolute;
            top: 4px;
            right: 4px;
            width: 20px;
            height: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .grid-item:hover .remove-btn {
            opacity: 1;
        }

        .batch-upload {
            margin-top: 15px;
            text-align: center;
        }

        .btn-batch {
            padding: 10px 20px;
            background: #07C160;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
        }

        .btn-batch:hover {
            background: #06ae56;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .setting-label {
            display: flex;
            align-items: center;
            font-size: 15px;
            color: #000;
        }

        .info-icon {
            width: 18px;
            height: 18px;
            border: 1px solid #999;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #999;
            margin-left: 8px;
            cursor: pointer;
        }

        .segmented-control {
            display: flex;
            background: #f0f0f0;
            border-radius: 8px;
            padding: 3px;
        }

        .segment {
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 13px;
            transition: all 0.3s;
            cursor: pointer;
            text-align: center;
            flex: 1;
        }

        .segment.active {
            background: #07C160;
            color: #fff;
        }

        .picker {
            padding: 12px 20px;
            background: #f0f0f0;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            min-width: 80px;
            text-align: center;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #07C160;
        }

        input:checked + .slider:before {
            transform: translateX(20px);
        }

        .action-buttons {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }

        .btn-secondary {
            flex: 1;
            padding: 12px;
            background: #f0f0f0;
            border-radius: 8px;
            font-size: 13px;
            color: #000;
            border: none;
            cursor: pointer;
        }

        .btn-secondary:hover {
            background: #e8e8e8;
        }

        .btn-generate {
            width: 100%;
            padding: 14px;
            background: #07C160;
            color: #fff;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            margin-bottom: 15px;
        }

        .btn-generate:hover {
            background: #06ae56;
        }

        .btn-generate:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .suggestion-box {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            display: none;
        }

        .suggestion-box.show {
            display: flex;
        }

        .suggestion-box input {
            flex: 1;
            padding: 12px;
            background: #f8f8f8;
            border-radius: 8px;
            font-size: 13px;
            border: 1px solid #eee;
        }

        .btn-submit-suggestion {
            padding: 0 20px;
            background: #07C160;
            color: #fff;
            border-radius: 8px;
            font-size: 13px;
            border: none;
            cursor: pointer;
        }

        .text-edit-box {
            position: relative;
            margin-bottom: 15px;
        }

        .text-edit-box textarea {
            width: 100%;
            height: 150px;
            padding: 16px;
            background: #f8f8f8;
            border-radius: 8px;
            font-size: 14px;
            border: 1px solid #eee;
            resize: vertical;
        }

        .word-count {
            position: absolute;
            bottom: 12px;
            right: 12px;
            font-size: 12px;
            color: #999;
        }

        .word-count.over-limit {
            color: #e64340;
        }

        .bottom-actions {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 16px;
            background: #fff;
            border-top: 1px solid #eee;
        }

        .btn-primary {
            width: 100%;
            padding: 16px;
            background: #07C160;
            color: #fff;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            cursor: pointer;
        }

        .btn-primary:hover {
            background: #06ae56;
        }

        .btn-primary:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .info-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .info-modal.show {
            display: flex;
        }

        .info-content {
            width: 300px;
            background: #fff;
            border-radius: 12px;
            padding: 24px;
            position: relative;
        }

        .info-close {
            position: absolute;
            top: 12px;
            right: 16px;
            font-size: 20px;
            color: #999;
            cursor: pointer;
        }

        .word-count-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .word-count-modal.show {
            display: flex;
        }

        .word-count-content {
            width: 280px;
            background: #fff;
            border-radius: 12px;
            padding: 20px;
        }

        .word-count-option {
            padding: 12px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
        }

        .word-count-option:hover {
            background: #f8f8f8;
        }

        .word-count-option:last-child {
            border-bottom: none;
        }

        .word-count-custom {
            padding: 12px;
            border-top: 1px solid #eee;
        }

        .word-count-custom input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }

        #file-input, #batch-file-input {
            display: none;
        }
    </style>
</head>
<body>
    <div class="navbar">
        <button class="navbar-back" onclick="goBack()">ã€ˆ</button>
        <div class="navbar-title">åˆ›ä½œæ—…è¡Œæ•…äº‹</div>
        <button class="navbar-help">Â·Â·Â·</button>
    </div>

    <div class="section">
        <div class="section-title">é€‰æ‹©å›¾ç‰‡ï¼ˆæœ€å¤š9å¼ ï¼‰</div>
        <div class="grid-container" id="image-grid">
            <!-- 9å®«æ ¼å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
        </div>
        <div class="batch-upload">
            <button class="btn-batch" onclick="batchUploadImages()">æ‰¹é‡å¯¼å…¥å›¾ç‰‡</button>
        </div>
        <input type="file" id="file-input" accept="image/*">
        <input type="file" id="batch-file-input" accept="image/*" multiple>
    </div>

    <!-- å…¶ä»–éƒ¨åˆ†ä¿æŒä¸å˜ -->
    <div class="section">
        <div class="section-title">AIæ–‡æ¡ˆè®¾ç½®</div>
        
        <div class="setting-item">
            <div class="setting-label">
                æ–‡æ¡ˆé£æ ¼
                <div class="info-icon" onclick="showInfo('é£æ ¼')">i</div>
            </div>
            <div class="segmented-control">
                <div class="segment active" data-value="æ–‡è‰º" onclick="changeStyle(this)">æ–‡è‰º</div>
                <div class="segment" data-value="å¹½é»˜" onclick="changeStyle(this)">å¹½é»˜</div>
                <div class="segment" data-value="ç®€æ´" onclick="changeStyle(this)">ç®€æ´</div>
            </div>
        </div>

        <div class="setting-item">
            <div class="setting-label">
                <span>ğŸ˜Š æ·»åŠ Emoji</span>
                <div class="info-icon" onclick="showInfo('Emoji')">i</div>
            </div>
            <label class="switch">
                <input type="checkbox" checked onchange="toggleEmoji(this)">
                <span class="slider"></span>
            </label>
        </div>

        <div class="setting-item">
            <div class="setting-label">
                æ–‡æ¡ˆå­—æ•°
                <div class="info-icon" onclick="showInfo('å­—æ•°')">i</div>
            </div>
            <div class="picker" onclick="showWordCountOptions()">
                <span id="word-count-display">50å­—</span>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="section-title">AIæ–‡æ¡ˆåˆ›ä½œ</div>
        
        <button class="btn-generate" onclick="generateAIText()" id="generate-button">
            ğŸ¨ ç”Ÿæˆæ–‡æ¡ˆ
        </button>
        
        <div class="text-edit-box">
            <textarea id="generated-text" placeholder="ç‚¹å‡»ä¸Šæ–¹"ç”Ÿæˆæ–‡æ¡ˆ"æŒ‰é’®ï¼ŒAIå°†æ ¹æ®æ‚¨é€‰æ‹©çš„å›¾ç‰‡ç”Ÿæˆç²¾å½©æ–‡æ¡ˆ..." 
                      maxlength="200" oninput="updateTextLength(this)"></textarea>
            <div class="word-count" id="word-count">0/200</div>
        </div>

        <div class="action-buttons">
            <button class="btn-secondary" onclick="rewriteText()">ğŸ”„ é‡å†™æ–‡æ¡ˆ</button>
            <button class="btn-secondary" onclick="toggleSuggestion()" id="suggestion-toggle">ğŸ’¡ ä¼˜åŒ–å»ºè®®</button>
        </div>

        <div class="suggestion-box" id="suggestion-box">
            <input type="text" placeholder="ä¾‹å¦‚ï¼šæ›´æµªæ¼«ä¸€äº› / çªå‡ºé›ªå±± / åŠ ç‚¹å†å²æ•…äº‹..." id="suggestion-input">
            <button class="btn-submit-suggestion" onclick="submitSuggestion()">æäº¤</button>
        </div>
    </div>

    <div class="bottom-actions">
        <button class="btn-primary" onclick="generateAndSave()" id="save-button">
            âœ… ç”Ÿæˆå¹¶ä¿å­˜è‡³ç›¸å†Œ
        </button>
    </div>

    <!-- æ¨¡æ€çª—å£ä¿æŒä¸å˜ -->
    <div class="info-modal" id="info-modal">
        <div class="info-content">
            <div class="info-close" onclick="hideInfo()">Ã—</div>
            <div class="info-title" id="info-title">æ ‡é¢˜</div>
            <div class="info-body" id="info-content">å†…å®¹</div>
        </div>
    </div>

    <div class="word-count-modal" id="word-count-modal">
        <div class="word-count-content">
            <div class="word-count-option" onclick="selectWordCount(50)">50å­—</div>
            <div class="word-count-option" onclick="selectWordCount(100)">100å­—</div>
            <div class="word-count-option" onclick="selectWordCount(150)">150å­—</div>
            <div class="word-count-option" onclick="selectWordCount(200)">200å­—</div>
            <div class="word-count-custom">
                <input type="number" id="custom-word-count" placeholder="è¾“å…¥20-200ä¹‹é—´çš„æ•°å­—" min="20" max="200">
                <button onclick="applyCustomWordCount()" style="margin-top: 8px; width: 100%; padding: 8px; background: #07C160; color: white; border: none; border-radius: 6px; cursor: pointer;">ç¡®å®š</button>
            </div>
        </div>
    </div>

    <script>
        const appState = {
            images: Array(9).fill(null), // ç”¨æ•°ç»„è®°å½•æ¯ä¸ªä½ç½®çš„å›¾ç‰‡
            textStyle: 'æ–‡è‰º',
            useEmoji: true,
            wordCount: 50,
            generatedText: '',
            showSuggestion: false,
            draggingIndex: -1
        };

        // åˆå§‹åŒ–9å®«æ ¼
        document.addEventListener('DOMContentLoaded', function() {
            initImageGrid();
            updateSaveButton();
        });

        function initImageGrid() {
            const imageGrid = document.getElementById('image-grid');
            imageGrid.innerHTML = '';
            
            // åˆ›å»º9ä¸ªæ ¼å­
            for (let i = 0; i < 9; i++) {
                const gridItem = document.createElement('div');
                gridItem.className = 'grid-item add-btn';
                gridItem.innerHTML = '<div class="add-icon">+</div>';
                gridItem.setAttribute('data-index', i);
                
                // ç‚¹å‡»ç©ºç™½æ ¼å­é€‰æ‹©å›¾ç‰‡
                gridItem.onclick = function() {
                    if (!appState.images[i]) {
                        document.getElementById('file-input').setAttribute('data-target-index', i);
                        document.getElementById('file-input').click();
                    }
                };
                
                // æ‹–æ‹½ç›¸å…³äº‹ä»¶
                gridItem.addEventListener('dragstart', handleDragStart);
                gridItem.addEventListener('dragover', handleDragOver);
                gridItem.addEventListener('drop', handleDrop);
                gridItem.addEventListener('dragenter', handleDragEnter);
                gridItem.addEventListener('dragleave', handleDragLeave);
                
                imageGrid.appendChild(gridItem);
            }
        }

        function batchUploadImages() {
            document.getElementById('batch-file-input').click();
        }

        // å¤„ç†æ‰¹é‡å¯¼å…¥
        document.getElementById('batch-file-input').addEventListener('change', function(event) {
            const files = event.target.files;
            let fileIndex = 0;
            
            // æŒ‰é¡ºåºå¡«å……ç©ºç™½ä½ç½®
            for (let i = 0; i < 9 && fileIndex < files.length; i++) {
                if (!appState.images[i]) {
                    const file = files[fileIndex];
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        appState.images[i] = e.target.result;
                        updateGridItem(i, e.target.result);
                    };
                    reader.readAsDataURL(file);
                    fileIndex++;
                }
            }
        });

        // å¤„ç†å•ä¸ªå›¾ç‰‡é€‰æ‹©
        document.getElementById('file-input').addEventListener('change', function(event) {
            const files = event.target.files;
            if (files.length > 0) {
                const targetIndex = parseInt(this.getAttribute('data-target-index'));
                const file = files[0];
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    appState.images[targetIndex] = e.target.result;
                    updateGridItem(targetIndex, e.target.result);
                };
                reader.readAsDataURL(file);
            }
        });

        function updateGridItem(index, imageData) {
            const gridItems = document.querySelectorAll('.grid-item');
            const gridItem = gridItems[index];
            
            gridItem.className = 'grid-item';
            gridItem.innerHTML = `
                <img src="${imageData}" alt="æ—…è¡Œå›¾ç‰‡" draggable="true">
                <div class="remove-btn" onclick="removeImage(${index})">Ã—</div>
            `;
            
            // é‡æ–°ç»‘å®šæ‹–æ‹½äº‹ä»¶
            gridItem.addEventListener('dragstart', handleDragStart);
            gridItem.addEventListener('dragover', handleDragOver);
            gridItem.addEventListener('drop', handleDrop);
            gridItem.addEventListener('dragenter', handleDragEnter);
            gridItem.addEventListener('dragleave', handleDragLeave);
        }

        function removeImage(index) {
            event.stopPropagation();
            appState.images[index] = null;
            
            const gridItems = document.querySelectorAll('.grid-item');
            const gridItem = gridItems[index];
            
            gridItem.className = 'grid-item add-btn';
            gridItem.innerHTML = '<div class="add-icon">+</div>';
            
            // é‡æ–°ç»‘å®šç‚¹å‡»äº‹ä»¶
            gridItem.onclick = function() {
                document.getElementById('file-input').setAttribute('data-target-index', index);
                document.getElementById('file-input').click();
            };
        }

        // æ‹–æ‹½åŠŸèƒ½
        function handleDragStart(e) {
            const index = parseInt(this.getAttribute('data-index'));
            if (appState.images[index]) {
                appState.draggingIndex = index;
                this.classList.add('dragging');
                e.dataTransfer.effectAllowed = 'move';
            }
        }

        function handleDragOver(e) {
            e.preventDefault();
            return false;
        }

        function handleDrop(e) {
            e.preventDefault();
            const targetIndex = parseInt(this.getAttribute('data-index'));
            
            if (appState.draggingIndex !== -1 && appState.draggingIndex !== targetIndex) {
                // äº¤æ¢å›¾ç‰‡
                [appState.images[appState.draggingIndex], appState.images[targetIndex]] = 
                [appState.images[targetIndex], appState.images[appState.draggingIndex]];
                
                // æ›´æ–°UI
                updateGridFromState();
            }
            
            this.classList.remove('drop-zone');
            return false;
        }

        function handleDragEnter(e) {
            this.classList.add('drop-zone');
        }

        function handleDragLeave(e) {
            this.classList.remove('drop-zone');
        }

        function updateGridFromState() {
            const gridItems = document.querySelectorAll('.grid-item');
            
            for (let i = 0; i < 9; i++) {
                if (appState.images[i]) {
                    updateGridItem(i, appState.images[i]);
                } else {
                    const gridItem = gridItems[i];
                    gridItem.className = 'grid-item add-btn';
                    gridItem.innerHTML = '<div class="add-icon">+</div>';
                    gridItem.onclick = function() {
                        document.getElementById('file-input').setAttribute('data-target-index', i);
                        document.getElementById('file-input').click();
                    };
                }
            }
        }

        // å…¶ä»–å‡½æ•°ä¿æŒä¸å˜ï¼ˆgenerateAIText, changeStyle, toggleEmojiç­‰ï¼‰
        function generateAIText() {
            const textArea = document.getElementById('generated-text');
            const generateButton = document.getElementById('generate-button');
            
            // æ£€æŸ¥æ˜¯å¦æœ‰å›¾ç‰‡
            const hasImages = appState.images.some(img => img !== null);
            if (!hasImages) {
                alert('è¯·å…ˆé€‰æ‹©å›¾ç‰‡');
                return;
            }
            
            generateButton.disabled = true;
            generateButton.textContent = 'AIæ­£åœ¨æ€è€ƒ...';
            
            setTimeout(() => {
                const sampleTexts = {
                    'æ–‡è‰º': 'æ¼«æ­¥åœ¨è¿™ç‰‡ç¥å¥‡çš„åœŸåœ°ä¸Šï¼Œæ¯ä¸€å¸§é£æ™¯éƒ½å¦‚è¯—å¦‚ç”»ã€‚è¿œå±±å«é»›ï¼Œè¿‘æ°´å¦‚é•œï¼Œæ—¶å…‰åœ¨è¿™é‡Œä»¿ä½›æ”¾æ…¢äº†è„šæ­¥ã€‚è®©å¿ƒçµåœ¨æ—…é€”ä¸­å¾—åˆ°çœŸæ­£çš„æ –æ¯ï¼Œæ„Ÿå—ç”Ÿå‘½æœ€æœ¬çœŸçš„ç¾å¥½ã€‚',
                    'å¹½é»˜': 'å“ˆå“ˆï¼Œè¿™æ¬¡æ—…è¡ŒçœŸæ˜¯ç¬‘æ–™ç™¾å‡ºï¼ä»è¿·è·¯åˆ°çˆ†èƒï¼Œä»é¥¿è‚šå­åˆ°æ™’æˆå°é»‘ç‚­ï¼Œä½†è¿™ä¸€åˆ‡éƒ½æˆäº†æœ€çè´µçš„å›å¿†ã€‚æ—…è¡Œå˜›ï¼Œå°±æ˜¯è¦æœ‰ç‚¹æ„å¤–æ‰ç²¾å½©ï¼',
                    'ç®€æ´': 'ç¾å¥½çš„æ—…ç¨‹ï¼Œéš¾å¿˜çš„å›å¿†ã€‚å±±å·æ¹–æµ·ï¼Œå°½æ”¶çœ¼åº•ã€‚æ”¾æ¾å¿ƒæƒ…ï¼Œäº«å—å½“ä¸‹ã€‚'
                };
                
                let text = sampleTexts[appState.textStyle];
                if (appState.useEmoji) {
                    text += ' ğŸŒ„âœ¨ğŸš—';
                }
                
                textArea.value = text;
                appState.generatedText = text;
                updateTextLength(textArea);
                
                generateButton.disabled = false;
                generateButton.textContent = 'ğŸ¨ ç”Ÿæˆæ–‡æ¡ˆ';
            }, 2000);
        }

        function changeStyle(element) {
            const segments = document.querySelectorAll('.segment');
            segments.forEach(seg => seg.classList.remove('active'));
            element.classList.add('active');
            appState.textStyle = element.getAttribute('data-value');
        }

        function toggleEmoji(checkbox) {
            appState.useEmoji = checkbox.checked;
        }

        function showWordCountOptions() {
            document.getElementById('word-count-modal').classList.add('show');
        }

        function selectWordCount(count) {
            appState.wordCount = count;
            document.getElementById('word-count-display').textContent = count + 'å­—';
            document.getElementById('word-count-modal').classList.remove('show');
        }

        function applyCustomWordCount() {
            const input = document.getElementById('custom-word-count');
            const count = parseInt(input.value);
            
            if (!isNaN(count) && count >= 20 && count <= 200) {
                selectWordCount(count);
            } else {
                alert('è¯·è¾“å…¥20-200ä¹‹é—´çš„æ•°å­—');
            }
        }

        function rewriteText() {
            if (!appState.generatedText) {
                alert('è¯·å…ˆç”Ÿæˆæ–‡æ¡ˆ');
                return;
            }
            generateAIText();
        }

        function toggleSuggestion() {
            const suggestionBox = document.getElementById('suggestion-box');
            const toggleButton = document.getElementById('suggestion-toggle');
            
            appState.showSuggestion = !appState.showSuggestion;
            
            if (appState.showSuggestion) {
                suggestionBox.classList.add('show');
                toggleButton.textContent = 'æ”¶èµ·å»ºè®®';
            } else {
                suggestionBox.classList.remove('show');
                toggleButton.textContent = 'ğŸ’¡ ä¼˜åŒ–å»ºè®®';
            }
        }

        function submitSuggestion() {
            const suggestionInput = document.getElementById('suggestion-input');
            const suggestion = suggestionInput.value.trim();
            
            if (suggestion) {
                alert(`å·²æäº¤ä¼˜åŒ–å»ºè®®: "${suggestion}"\nAIå°†æ ¹æ®æ‚¨çš„å»ºè®®é‡æ–°ç”Ÿæˆæ–‡æ¡ˆã€‚`);
                suggestionInput.value = '';
                generateAIText();
            } else {
                alert('è¯·è¾“å…¥ä¼˜åŒ–å»ºè®®');
            }
        }

        function updateTextLength(textarea) {
            const length = textarea.value.length;
            const wordCountElement = document.getElementById('word-count');
            
            wordCountElement.textContent = length + '/200';
            
            if (length > 200) {
                wordCountElement.classList.add('over-limit');
            } else {
                wordCountElement.classList.remove('over-limit');
            }
            
            updateSaveButton();
        }

        function updateSaveButton() {
            const saveButton = document.getElementById('save-button');
            const textLength = document.getElementById('generated-text').value.length;
            
            saveButton.disabled = textLength > 200 || textLength === 0;
        }

        function generateAndSave() {
            alert('å›¾ç‰‡å·²ç”Ÿæˆå¹¶ä¿å­˜åˆ°è™šæ‹Ÿç›¸å†Œï¼\nè¯·æ‰“å¼€æœ‹å‹åœˆåˆ†äº«æ‚¨çš„æ—…è¡Œæ•…äº‹ã€‚');
        }

        function showInfo(type) {
            const modal = document.getElementById('info-modal');
            const title = document.getElementById('info-title');
            const content = document.getElementById('info-content');
            
            const infoMap = {
                'é£æ ¼': 'é€‰æ‹©AIç”Ÿæˆæ–‡æ¡ˆçš„æ•´ä½“è¯­è°ƒä¸é£æ ¼ã€‚',
                'Emoji': 'å¼€å¯åï¼ŒAIä¼šåœ¨æ–‡æ¡ˆä¸­è‡ªåŠ¨æ’å…¥åˆé€‚çš„è¡¨æƒ…ç¬¦å·ã€‚',
                'å­—æ•°': 'ä¸ºAIç”Ÿæˆè®¾å®šä¸€ä¸ªå¤§è‡´çš„å­—æ•°ç›®æ ‡ã€‚æ‚¨ä»å¯åœ¨ä¸‹æ–¹è¾“å…¥æ¡†ä¸­è‡ªç”±ç¼–è¾‘ã€‚'
            };
            
            title.textContent = type;
            content.textContent = infoMap[type];
            modal.classList.add('show');
        }

        function hideInfo() {
            document.getElementById('info-modal').classList.remove('show');
            document.getElementById('word-count-modal').classList.remove('show');
        }

        function goBack() {
            if (confirm('ç¡®å®šè¦ç¦»å¼€å—ï¼Ÿæ‚¨çš„ç¼–è¾‘å†…å®¹å°†ä¸ä¼šè¢«ä¿å­˜ã€‚')) {
                alert('è¿”å›ä¸Šä¸€é¡µ');
            }
        }
    </script>
</body>
</html>